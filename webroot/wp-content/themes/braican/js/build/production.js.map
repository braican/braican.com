{"version":3,"sources":["webroot/wp-content/themes/braican/js/node_modules/browser-pack/_prelude.js","webroot/wp-content/themes/braican/js/webroot/wp-content/themes/braican/js/modules/scrollto.js","webroot/wp-content/themes/braican/js/webroot/wp-content/themes/braican/js/src/main.js"],"names":[],"mappings":"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","file":"production.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\n\nfunction elYPosition(el) {\n    let y = el.offsetTop;\n    let node = el;\n    while (node.offsetParent && node.offsetParent !== document.body) {\n        node = node.offsetParent;\n        y += node.offsetTop;\n    } return y;\n}\n\n// function scrollIt(yPos) {\n//     window.scrollTo(0, yPos);\n// }\n\n// function smoothScroll(el) {\n//     const startY = window.pageYOffset;\n//     const stopY = elmYPosition(el);\n//     const distance = stopY > startY ? stopY - startY : startY - stopY;\n//     if (distance < 100) {\n//         window.scrollTo(0, stopY); return;\n//     }\n//     let speed = Math.round(distance / 100);\n//     if (speed >= 40) speed = 40;\n//     const step = Math.round(distance / 25);\n//     let leapY = stopY > startY ? startY + step : startY - step;\n//     let timer = 1;\n//     if (stopY > startY) {\n//         for (let i = startY; i < stopY; i += step) {\n//             console.log(leapY);\n//             // window.scrollTo(0, leapY);\n//             setTimeout(() => {\n//                 scrollIt(leapY);\n//             }, timer * speed);\n//             leapY += step;\n//             if (leapY > stopY) leapY = stopY;\n//             timer += 1;\n//         }\n//         return;\n//     }\n//     for (let i = startY; i > stopY; i -= step) {\n//         // setTimeout(window.scrollTo(0, leapY), timer * speed);\n//         // setTimeout('window.scrollTo(0, ' + leapY + ')', timer * speed);\n//         leapY -= step;\n//         if (leapY < stopY) leapY = stopY;\n//         timer += 1;\n//     }\n// }\n\n/**\n * Loop scrolling animation\n */\n// function loopAnimateScroll(timestamp) {\n\n//     pattern = percentage < 0.5 ? 4 * percentage * percentage * percentage : (percentage - 1) * (2 * percentage - 2) * (2 * percentage - 2) + 1; // acceleration until halfway, then deceleration\n\n//     if (!start) { start = timestamp; }\n//     timeLapsed += timestamp - start;\n//     percentage = (timeLapsed / parseInt(animateSettings.speed, 10));\n//     percentage = (percentage > 1) ? 1 : percentage;\n//     position = startLocation + (distance * easingPattern(animateSettings, percentage));\n//     window.scrollTo(0, Math.floor(position));\n//     if (!stopAnimateScroll(position, endLocation)) {\n//         window.requestAnimationFrame(loopAnimateScroll);\n//         start = timestamp;\n//     }\n// };\n\n// function smoothScrollTo(el) {\n//     const startY = window.pageYOffset;\n//     const stopY = elYPosition(el);\n\n//     let timer = 0;\n\n//     for (let i = startY; i < stopY; i += 4) {\n//         setTimeout(() => {\n//             window.scrollTo(0, i);\n//         }, timer * 2);\n\n//         timer += 1;\n//     }\n// }\n\n/**\n * Determine the document's height\n * @returns {Number}\n */\nconst getDocumentHeight = function () {\n    return Math.max(\n        document.body.scrollHeight, document.documentElement.scrollHeight,\n        document.body.offsetHeight, document.documentElement.offsetHeight,\n        document.body.clientHeight, document.documentElement.clientHeight,\n    );\n};\n\n\n/**\n * Calculate the easing pattern\n * @link https://gist.github.com/gre/1650294\n * @param {String} type Easing pattern\n * @param {Number} time Time animation should take to complete\n * @returns {Number}\n */\nconst easingPattern = function (time) {\n    // acceleration until halfway, then deceleration\n    return time < 0.5 ? 4 * time * time * time : (time - 1) * (2 * time - 2) * (2 * time - 2) + 1;\n};\n\nfunction smoothScrollTo(el) {\n    const startY = window.pageYOffset;\n    const stopY = elYPosition(el);\n    const distance = stopY - startY;\n    const documentHeight = getDocumentHeight();\n\n    const speed = 600;\n\n    let timeLapsed = 0;\n    let start;\n    let percentage;\n    let position;\n    let animationInterval;\n\n\n    /**\n     * Cancel a scroll-in-progress\n     */\n    const cancelScroll = function () {\n        // clearInterval(animationInterval);\n        cancelAnimationFrame(animationInterval);\n    };\n\n    /**\n     * Stop the scroll animation when it reaches its target (or the bottom/top of page)\n     * @param {Number} position Current position on the page\n     * @param {Number} endLocation Scroll to location\n     * @param {Number} animationInterval How much to scroll on this loop\n     */\n    const stopAnimateScroll = function (pos, endLocation) {\n        // Get the current location\n        const currentLocation = window.pageYOffset;\n\n        // Check if the end location has been reached yet (or we've hit the end of the document)\n        if (\n            pos === endLocation ||\n            currentLocation === endLocation ||\n            ((startY < endLocation && window.innerHeight + currentLocation) >= documentHeight)\n        ) {\n            // Clear the animation timer\n            cancelScroll();\n\n            // Reset start\n            start = null;\n\n            return true;\n        }\n\n        return false;\n    };\n\n\n    /**\n     * Loop scrolling animation\n     */\n    const loopAnimateScroll = function (timestamp) {\n        if (!start) { start = timestamp; }\n        timeLapsed += timestamp - start;\n        percentage = (timeLapsed / parseInt(speed, 10));\n        percentage = (percentage > 1) ? 1 : percentage;\n        position = startY + (distance * easingPattern(percentage));\n        window.scrollTo(0, Math.floor(position));\n        if (!stopAnimateScroll(position, stopY)) {\n            window.requestAnimationFrame(loopAnimateScroll);\n            start = timestamp;\n        }\n    };\n\n    window.requestAnimationFrame(loopAnimateScroll);\n}\n\n\nfunction init_scrollto() {\n    const anchors = document.querySelectorAll('a[href^=\"#\"]');\n\n    anchors.forEach((anchor) => {\n        anchor.addEventListener('click', function (event) {\n            event.preventDefault();\n            const href = this.getAttribute('href').slice(1);\n            const scrollToEl = document.getElementById(href);\n            if (scrollToEl) {\n                smoothScrollTo(scrollToEl);\n            }\n        });\n    });\n}\n\nexport default init_scrollto;\n","//\n// Imports\n//\n\nimport scrollto from '../modules/scrollto';\n\n\n//\n// namespace - SK\n//\n\n(function (SK) {\n    /* --------------------------------------------\n     * --public\n     * -------------------------------------------- */\n\n    //\n    // init the things\n    //\n    const init = function () {\n        scrollto();\n    };\n\n\n    // ------------------------------------\n    // DOM should be ready, since js is\n    //  getting loaded at the bottom\n    //\n    init();\n}(window.SK = window.SK || {}));\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJ3ZWJyb290L3dwLWNvbnRlbnQvdGhlbWVzL2JyYWljYW4vanMvbW9kdWxlcy9zY3JvbGx0by5qcyIsIndlYnJvb3Qvd3AtY29udGVudC90aGVtZXMvYnJhaWNhbi9qcy9zcmMvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7QUNFQSxTQUFTLFdBQVQsQ0FBcUIsRUFBckIsRUFBeUI7QUFDckIsUUFBSSxJQUFJLEdBQUcsU0FBWDtBQUNBLFFBQUksT0FBTyxFQUFYO0FBQ0EsV0FBTyxLQUFLLFlBQUwsSUFBcUIsS0FBSyxZQUFMLEtBQXNCLFNBQVMsSUFBM0QsRUFBaUU7QUFDN0QsZUFBTyxLQUFLLFlBQVo7QUFDQSxhQUFLLEtBQUssU0FBVjtBQUNILEtBQUMsT0FBTyxDQUFQO0FBQ0w7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOzs7O0FBSUEsSUFBTSxvQkFBb0IsU0FBcEIsaUJBQW9CLEdBQVk7QUFDbEMsV0FBTyxLQUFLLEdBQUwsQ0FDSCxTQUFTLElBQVQsQ0FBYyxZQURYLEVBQ3lCLFNBQVMsZUFBVCxDQUF5QixZQURsRCxFQUVILFNBQVMsSUFBVCxDQUFjLFlBRlgsRUFFeUIsU0FBUyxlQUFULENBQXlCLFlBRmxE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QUFPLFNBQVAsSUFBTyxHQUFZO0FBQ3JCO0FBQ0gsS0FGRDs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0gsQ0FsQkEsRUFrQkMsT0FBTyxFQUFQLEdBQVksT0FBTyxFQUFQLElBQWEsRUFsQjFCLENBQUQsQyxDQVhBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcblxuZnVuY3Rpb24gZWxZUG9zaXRpb24oZWwpIHtcbiAgICBsZXQgeSA9IGVsLm9mZnNldFRvcDtcbiAgICBsZXQgbm9kZSA9IGVsO1xuICAgIHdoaWxlIChub2RlLm9mZnNldFBhcmVudCAmJiBub2RlLm9mZnNldFBhcmVudCAhPT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBub2RlID0gbm9kZS5vZmZzZXRQYXJlbnQ7XG4gICAgICAgIHkgKz0gbm9kZS5vZmZzZXRUb3A7XG4gICAgfSByZXR1cm4geTtcbn1cblxuLy8gZnVuY3Rpb24gc2Nyb2xsSXQoeVBvcykge1xuLy8gICAgIHdpbmRvdy5zY3JvbGxUbygwLCB5UG9zKTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gc21vb3RoU2Nyb2xsKGVsKSB7XG4vLyAgICAgY29uc3Qgc3RhcnRZID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuLy8gICAgIGNvbnN0IHN0b3BZID0gZWxtWVBvc2l0aW9uKGVsKTtcbi8vICAgICBjb25zdCBkaXN0YW5jZSA9IHN0b3BZID4gc3RhcnRZID8gc3RvcFkgLSBzdGFydFkgOiBzdGFydFkgLSBzdG9wWTtcbi8vICAgICBpZiAoZGlzdGFuY2UgPCAxMDApIHtcbi8vICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHN0b3BZKTsgcmV0dXJuO1xuLy8gICAgIH1cbi8vICAgICBsZXQgc3BlZWQgPSBNYXRoLnJvdW5kKGRpc3RhbmNlIC8gMTAwKTtcbi8vICAgICBpZiAoc3BlZWQgPj0gNDApIHNwZWVkID0gNDA7XG4vLyAgICAgY29uc3Qgc3RlcCA9IE1hdGgucm91bmQoZGlzdGFuY2UgLyAyNSk7XG4vLyAgICAgbGV0IGxlYXBZID0gc3RvcFkgPiBzdGFydFkgPyBzdGFydFkgKyBzdGVwIDogc3RhcnRZIC0gc3RlcDtcbi8vICAgICBsZXQgdGltZXIgPSAxO1xuLy8gICAgIGlmIChzdG9wWSA+IHN0YXJ0WSkge1xuLy8gICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRZOyBpIDwgc3RvcFk7IGkgKz0gc3RlcCkge1xuLy8gICAgICAgICAgICAgY29uc29sZS5sb2cobGVhcFkpO1xuLy8gICAgICAgICAgICAgLy8gd2luZG93LnNjcm9sbFRvKDAsIGxlYXBZKTtcbi8vICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuLy8gICAgICAgICAgICAgICAgIHNjcm9sbEl0KGxlYXBZKTtcbi8vICAgICAgICAgICAgIH0sIHRpbWVyICogc3BlZWQpO1xuLy8gICAgICAgICAgICAgbGVhcFkgKz0gc3RlcDtcbi8vICAgICAgICAgICAgIGlmIChsZWFwWSA+IHN0b3BZKSBsZWFwWSA9IHN0b3BZO1xuLy8gICAgICAgICAgICAgdGltZXIgKz0gMTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICByZXR1cm47XG4vLyAgICAgfVxuLy8gICAgIGZvciAobGV0IGkgPSBzdGFydFk7IGkgPiBzdG9wWTsgaSAtPSBzdGVwKSB7XG4vLyAgICAgICAgIC8vIHNldFRpbWVvdXQod2luZG93LnNjcm9sbFRvKDAsIGxlYXBZKSwgdGltZXIgKiBzcGVlZCk7XG4vLyAgICAgICAgIC8vIHNldFRpbWVvdXQoJ3dpbmRvdy5zY3JvbGxUbygwLCAnICsgbGVhcFkgKyAnKScsIHRpbWVyICogc3BlZWQpO1xuLy8gICAgICAgICBsZWFwWSAtPSBzdGVwO1xuLy8gICAgICAgICBpZiAobGVhcFkgPCBzdG9wWSkgbGVhcFkgPSBzdG9wWTtcbi8vICAgICAgICAgdGltZXIgKz0gMTtcbi8vICAgICB9XG4vLyB9XG5cbi8qKlxuICogTG9vcCBzY3JvbGxpbmcgYW5pbWF0aW9uXG4gKi9cbi8vIGZ1bmN0aW9uIGxvb3BBbmltYXRlU2Nyb2xsKHRpbWVzdGFtcCkge1xuXG4vLyAgICAgcGF0dGVybiA9IHBlcmNlbnRhZ2UgPCAwLjUgPyA0ICogcGVyY2VudGFnZSAqIHBlcmNlbnRhZ2UgKiBwZXJjZW50YWdlIDogKHBlcmNlbnRhZ2UgLSAxKSAqICgyICogcGVyY2VudGFnZSAtIDIpICogKDIgKiBwZXJjZW50YWdlIC0gMikgKyAxOyAvLyBhY2NlbGVyYXRpb24gdW50aWwgaGFsZndheSwgdGhlbiBkZWNlbGVyYXRpb25cblxuLy8gICAgIGlmICghc3RhcnQpIHsgc3RhcnQgPSB0aW1lc3RhbXA7IH1cbi8vICAgICB0aW1lTGFwc2VkICs9IHRpbWVzdGFtcCAtIHN0YXJ0O1xuLy8gICAgIHBlcmNlbnRhZ2UgPSAodGltZUxhcHNlZCAvIHBhcnNlSW50KGFuaW1hdGVTZXR0aW5ncy5zcGVlZCwgMTApKTtcbi8vICAgICBwZXJjZW50YWdlID0gKHBlcmNlbnRhZ2UgPiAxKSA/IDEgOiBwZXJjZW50YWdlO1xuLy8gICAgIHBvc2l0aW9uID0gc3RhcnRMb2NhdGlvbiArIChkaXN0YW5jZSAqIGVhc2luZ1BhdHRlcm4oYW5pbWF0ZVNldHRpbmdzLCBwZXJjZW50YWdlKSk7XG4vLyAgICAgd2luZG93LnNjcm9sbFRvKDAsIE1hdGguZmxvb3IocG9zaXRpb24pKTtcbi8vICAgICBpZiAoIXN0b3BBbmltYXRlU2Nyb2xsKHBvc2l0aW9uLCBlbmRMb2NhdGlvbikpIHtcbi8vICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wQW5pbWF0ZVNjcm9sbCk7XG4vLyAgICAgICAgIHN0YXJ0ID0gdGltZXN0YW1wO1xuLy8gICAgIH1cbi8vIH07XG5cbi8vIGZ1bmN0aW9uIHNtb290aFNjcm9sbFRvKGVsKSB7XG4vLyAgICAgY29uc3Qgc3RhcnRZID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuLy8gICAgIGNvbnN0IHN0b3BZID0gZWxZUG9zaXRpb24oZWwpO1xuXG4vLyAgICAgbGV0IHRpbWVyID0gMDtcblxuLy8gICAgIGZvciAobGV0IGkgPSBzdGFydFk7IGkgPCBzdG9wWTsgaSArPSA0KSB7XG4vLyAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuLy8gICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGkpO1xuLy8gICAgICAgICB9LCB0aW1lciAqIDIpO1xuXG4vLyAgICAgICAgIHRpbWVyICs9IDE7XG4vLyAgICAgfVxuLy8gfVxuXG4vKipcbiAqIERldGVybWluZSB0aGUgZG9jdW1lbnQncyBoZWlnaHRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbmNvbnN0IGdldERvY3VtZW50SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBNYXRoLm1heChcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsXG4gICAgICAgIGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCxcbiAgICApO1xufTtcblxuXG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgZWFzaW5nIHBhdHRlcm5cbiAqIEBsaW5rIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2dyZS8xNjUwMjk0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBFYXNpbmcgcGF0dGVyblxuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgVGltZSBhbmltYXRpb24gc2hvdWxkIHRha2UgdG8gY29tcGxldGVcbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbmNvbnN0IGVhc2luZ1BhdHRlcm4gPSBmdW5jdGlvbiAodGltZSkge1xuICAgIC8vIGFjY2VsZXJhdGlvbiB1bnRpbCBoYWxmd2F5LCB0aGVuIGRlY2VsZXJhdGlvblxuICAgIHJldHVybiB0aW1lIDwgMC41ID8gNCAqIHRpbWUgKiB0aW1lICogdGltZSA6ICh0aW1lIC0gMSkgKiAoMiAqIHRpbWUgLSAyKSAqICgyICogdGltZSAtIDIpICsgMTtcbn07XG5cbmZ1bmN0aW9uIHNtb290aFNjcm9sbFRvKGVsKSB7XG4gICAgY29uc3Qgc3RhcnRZID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgIGNvbnN0IHN0b3BZID0gZWxZUG9zaXRpb24oZWwpO1xuICAgIGNvbnN0IGRpc3RhbmNlID0gc3RvcFkgLSBzdGFydFk7XG4gICAgY29uc3QgZG9jdW1lbnRIZWlnaHQgPSBnZXREb2N1bWVudEhlaWdodCgpO1xuXG4gICAgY29uc3Qgc3BlZWQgPSA2MDA7XG5cbiAgICBsZXQgdGltZUxhcHNlZCA9IDA7XG4gICAgbGV0IHN0YXJ0O1xuICAgIGxldCBwZXJjZW50YWdlO1xuICAgIGxldCBwb3NpdGlvbjtcbiAgICBsZXQgYW5pbWF0aW9uSW50ZXJ2YWw7XG5cblxuICAgIC8qKlxuICAgICAqIENhbmNlbCBhIHNjcm9sbC1pbi1wcm9ncmVzc1xuICAgICAqL1xuICAgIGNvbnN0IGNhbmNlbFNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gY2xlYXJJbnRlcnZhbChhbmltYXRpb25JbnRlcnZhbCk7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkludGVydmFsKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3RvcCB0aGUgc2Nyb2xsIGFuaW1hdGlvbiB3aGVuIGl0IHJlYWNoZXMgaXRzIHRhcmdldCAob3IgdGhlIGJvdHRvbS90b3Agb2YgcGFnZSlcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcG9zaXRpb24gQ3VycmVudCBwb3NpdGlvbiBvbiB0aGUgcGFnZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBlbmRMb2NhdGlvbiBTY3JvbGwgdG8gbG9jYXRpb25cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYW5pbWF0aW9uSW50ZXJ2YWwgSG93IG11Y2ggdG8gc2Nyb2xsIG9uIHRoaXMgbG9vcFxuICAgICAqL1xuICAgIGNvbnN0IHN0b3BBbmltYXRlU2Nyb2xsID0gZnVuY3Rpb24gKHBvcywgZW5kTG9jYXRpb24pIHtcbiAgICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IGxvY2F0aW9uXG4gICAgICAgIGNvbnN0IGN1cnJlbnRMb2NhdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldDtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZW5kIGxvY2F0aW9uIGhhcyBiZWVuIHJlYWNoZWQgeWV0IChvciB3ZSd2ZSBoaXQgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQpXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHBvcyA9PT0gZW5kTG9jYXRpb24gfHxcbiAgICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbiA9PT0gZW5kTG9jYXRpb24gfHxcbiAgICAgICAgICAgICgoc3RhcnRZIDwgZW5kTG9jYXRpb24gJiYgd2luZG93LmlubmVySGVpZ2h0ICsgY3VycmVudExvY2F0aW9uKSA+PSBkb2N1bWVudEhlaWdodClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgYW5pbWF0aW9uIHRpbWVyXG4gICAgICAgICAgICBjYW5jZWxTY3JvbGwoKTtcblxuICAgICAgICAgICAgLy8gUmVzZXQgc3RhcnRcbiAgICAgICAgICAgIHN0YXJ0ID0gbnVsbDtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogTG9vcCBzY3JvbGxpbmcgYW5pbWF0aW9uXG4gICAgICovXG4gICAgY29uc3QgbG9vcEFuaW1hdGVTY3JvbGwgPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7XG4gICAgICAgIGlmICghc3RhcnQpIHsgc3RhcnQgPSB0aW1lc3RhbXA7IH1cbiAgICAgICAgdGltZUxhcHNlZCArPSB0aW1lc3RhbXAgLSBzdGFydDtcbiAgICAgICAgcGVyY2VudGFnZSA9ICh0aW1lTGFwc2VkIC8gcGFyc2VJbnQoc3BlZWQsIDEwKSk7XG4gICAgICAgIHBlcmNlbnRhZ2UgPSAocGVyY2VudGFnZSA+IDEpID8gMSA6IHBlcmNlbnRhZ2U7XG4gICAgICAgIHBvc2l0aW9uID0gc3RhcnRZICsgKGRpc3RhbmNlICogZWFzaW5nUGF0dGVybihwZXJjZW50YWdlKSk7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBNYXRoLmZsb29yKHBvc2l0aW9uKSk7XG4gICAgICAgIGlmICghc3RvcEFuaW1hdGVTY3JvbGwocG9zaXRpb24sIHN0b3BZKSkge1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wQW5pbWF0ZVNjcm9sbCk7XG4gICAgICAgICAgICBzdGFydCA9IHRpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3BBbmltYXRlU2Nyb2xsKTtcbn1cblxuXG5mdW5jdGlvbiBpbml0X3Njcm9sbHRvKCkge1xuICAgIGNvbnN0IGFuY2hvcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWZePVwiI1wiXScpO1xuXG4gICAgYW5jaG9ycy5mb3JFYWNoKChhbmNob3IpID0+IHtcbiAgICAgICAgYW5jaG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgaHJlZiA9IHRoaXMuZ2V0QXR0cmlidXRlKCdocmVmJykuc2xpY2UoMSk7XG4gICAgICAgICAgICBjb25zdCBzY3JvbGxUb0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaHJlZik7XG4gICAgICAgICAgICBpZiAoc2Nyb2xsVG9FbCkge1xuICAgICAgICAgICAgICAgIHNtb290aFNjcm9sbFRvKHNjcm9sbFRvRWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgaW5pdF9zY3JvbGx0bztcbiIsIi8vXG4vLyBJbXBvcnRzXG4vL1xuXG5pbXBvcnQgc2Nyb2xsdG8gZnJvbSAnLi4vbW9kdWxlcy9zY3JvbGx0byc7XG5cblxuLy9cbi8vIG5hbWVzcGFjZSAtIFNLXG4vL1xuXG4oZnVuY3Rpb24gKFNLKSB7XG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiAtLXB1YmxpY1xuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgICAvL1xuICAgIC8vIGluaXQgdGhlIHRoaW5nc1xuICAgIC8vXG4gICAgY29uc3QgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2Nyb2xsdG8oKTtcbiAgICB9O1xuXG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBET00gc2hvdWxkIGJlIHJlYWR5LCBzaW5jZSBqcyBpc1xuICAgIC8vICBnZXR0aW5nIGxvYWRlZCBhdCB0aGUgYm90dG9tXG4gICAgLy9cbiAgICBpbml0KCk7XG59KHdpbmRvdy5TSyA9IHdpbmRvdy5TSyB8fCB7fSkpO1xuIl19"}