!function(a,b){function c(){var a=b(document).width();return 700>=a?"mobile":"notMobile"}function d(a){b("#page").css({"min-height":window.innerHeight+"px"}),b("body").removeClass("project-view"),b("#main").css({position:"absolute",top:"0",zIndex:1e3}).fadeIn(e,function(){b("body").removeClass("project-view"),window.location.hash="",b("#project-modal").removeAttr("style").find("#load-project").empty(),b("#main, #page").removeAttr("style"),b(".site-footer").fadeIn(e),a&&"#"!=a&&b("body").scrollTo(a,f,{axis:"y",easing:"swing",margin:g})})}var e=600,f=800,g=!1,h="#project-modal .project-content";a.loader=function(a){var c=a.replace("#/",""),f=b('.project-group a[data-project="'+c+'"]').data("id");f&&(b("body").addClass("project-view"),b(".site-footer").hide(),b.when(b.get(braican_ajax.ajaxurl,{action:"ajax_action",post_id:f}),b("#main").fadeOut(e,function(){b("#loading").fadeIn(e)})).then(function(a){1==a[0]?(console.log("Uh oh. Looks like there's no project with that ID"),d()):(b("#load-project").html(a[0]),b("body").scrollTo(0),b("#load-project .project-content").removeAttr("style").removeClass("fixed-sidebar"),b("#project-modal").fadeIn(e,function(){b("#loading").fadeOut(e),b(".site-footer").fadeIn(e)}))}))},a.init=function(){b(window).on("hashchange",function(){if(window.location.hash.indexOf("#/")>-1){var b=window.location.hash.replace("#/","");b?a.loader(b):d(window.location.hash)}else d(window.location.hash)}),b(window).trigger("hashchange"),b('a[href^="/#"]').on("click",function(a){if(b("body").hasClass("home")){a.preventDefault();var c=b(this).attr("href").substring(1);b("body").hasClass("project-view")?d(c):c.length>1&&b("body").scrollTo(c,f,{axis:"y",easing:"swing",margin:g}),b(window).width()<600&&!b(this).parent().hasClass("logo")&&b(".mobile-nav").click()}}),b(".mobile-section-navigation i").on("click",function(a){a.preventDefault();var c=b(this),d=c.attr("class");scrollToSection="icon-angle-up"===d?c.parents("section").prev().data("section"):c.parents("section").next().data("section"),b("body").scrollTo("#"+scrollToSection,f,{axis:"y",easing:"swing",margin:g})}),b(".mobile-nav").on("click",function(a){a.preventDefault(),b(this).toggleClass("activated"),b(".site-nav").slideToggle(e)}),b("#fact").on("click",".more-facts",function(a){a.preventDefault(),b(this).addClass("animate-spin"),b.get(braican_ajax.ajaxurl,{action:"ajax_facts",die:!0},function(a){console.log(a),b("#fact").html(a)})}),b(".project-group a").on("click",function(a){a.preventDefault();var c=(b(this).attr("href"),b(this).attr("data-project"));window.location.hash="/"+c}),b("#project-modal").on("click",".close-modal",function(a){a.preventDefault(),d()}),b("#contact textarea").on({focus:function(){b("#contact").height(b("#contact").height()).addClass("swap-widths")},blur:function(){b("#contact").removeClass("swap-widths"),setTimeout(function(){b("#contact").removeAttr("style")},400)}}),b("#cscf .submit:not(.in-process)").on("click",function(){b(this).parent().valid()&&b(this).addClass("in-process").animate({paddingRight:"36px"},200,"swing",function(){b(this).removeAttr("style").append('<i class="icon-spin2 animate-spin"></i>')})});var c=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,h=navigator.userAgent.toLowerCase().indexOf("opera")>-1,i=navigator.userAgent.toLowerCase().indexOf("msie")>-1;if((c||h||i)&&"undefined"!=typeof document.getElementById){var j=window.addEventListener?"addEventListener":"attachEvent";window[j]("hashchange",function(){var a=document.getElementById(location.hash.substring(1));a&&(/^(?:a|select|input|button|textarea)$/i.test(a.tagName)||(a.tabIndex=-1),a.focus())},!1)}},b(document).ready(function(){a.init()}),b(window).resize(function(){b(h).removeClass("fixed-sidebar").removeAttr("style")}),b(window).scroll(function(){var a=b(h),d=b(window).height(),e=b(h).length>0?b("#project-modal .project-gallery").offset().top-20:null;"notMobile"==c()&&a.length>0&&b(window).scrollTop()>=e&&d>a.height()&&d-a.height()>260?a.width(a.width()).addClass("fixed-sidebar"):a.removeClass("fixed-sidebar").removeAttr("style")})}(window.BRAICAN=window.BRAICAN||{},jQuery);